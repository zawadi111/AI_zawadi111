# Redfin 데이터를 활용한 주택 시장 분석
## King County vs Pierce County 비교 연구

---

# 📋 분석 흐름 요약 (Executive Summary)

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                           【 프로젝트 분석 파이프라인 】                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│   [1] 데이터 수집        [2] 전처리           [3] EDA              [4] 통계분석  │
│   ───────────────       ────────────        ────────────         ────────────   │
│   • Redfin 크롤링       • 27→10 칼럼        • 기술통계           • Welch t-test │
│   • King/Pierce         • 결측치 제거       • 분포 분석          • 상관계수     │
│   • 6개월 데이터        • 이상치 2건 제거   • 시각화             • Chi-square   │
│   • 702건 원본          • 667건 최종        • 가격대별 분포      • 정규성 검정  │
│                                                                                 │
│         ↓                     ↓                   ↓                    ↓        │
│                                                                                 │
│   [5] 위치 분석         [6] 회귀 모델링      [7] 모델 검증        [8] 결론      │
│   ───────────────       ────────────        ────────────         ────────────   │
│   • Haversine 거리      • 통합 모델          • VIF 검정          • 면적 1순위   │
│   • 벨뷰/시애틀 거리    • COUNTY 더미        • 잔차 분석         • 위치 2순위   │
│   • 프리미엄 정량화     • 위치 확장 모델     • 5-Fold CV         • 투자 시사점  │
│   • K-means 클러스터    • Log 변환 비교      • Adj. R² 비교      • 가격 예측    │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

## 🎯 주요 분석 결과 한눈에 보기

| 질문 | 분석 방법 | 핵심 결과 |
|------|----------|----------|
| **Q1: 두 카운티의 가격은 어떻게 다른가?** | Welch t-test, 기술통계 | King $0.92M vs Pierce $0.64M (**+43.9% 프리미엄**) |
| **Q2: 어떤 변수가 가격을 결정하는가?** | 상관분석, Random Forest | **면적(SQFT) 1순위** (r=0.75, 중요도 75%+) |
| **Q3: 위치가 가격에 미치는 영향?** | Haversine 거리, 회귀분석 | 벨뷰 10km 이내 **+33.5%**, 시애틀 접근성 **+15.7%** |

### 📊 핵심 수치 요약

| 항목 | King County | Pierce County | 해석 |
|------|-------------|---------------|------|
| 평균 가격 | **$919,192** | **$638,716** | King +43.9% |
| 평균 면적 | 1,914 sqft | 2,040 sqft | Pierce +6.5% |
| $/sqft | $498 | $309 | King 1.52배 |
| 회귀 R² (기본) | 0.54 | 0.44 | King 예측력 우수 |
| 회귀 R² (위치 포함) | **0.73** | **0.66** | 위치 +20%p 개선 |

### 🏆 최종 결론

> **가격 = 면적 × 위치 프리미엄**
> - **1순위: 면적(SQUARE FEET)** - 상관계수 0.73~0.75, 중요도 75%+
> - **2순위: 위치** - 벨뷰 프리미엄 +33.5%, 시애틀 접근성 +15.7%
> - **King County**: 테크 허브 접근성 프리미엄, 소형·고가 도시형 주택
> - **Pierce County**: 위성 주거지, 대형·저가 가족형 주택

---

# 목차
1. [연구 배경 및 목적](#1-연구-배경-및-목적)
2. [데이터 선정 및 수집](#2-데이터-선정-및-수집)
3. [데이터 전처리](#3-데이터-전처리)
4. [탐색적 데이터 분석 (EDA)](#4-탐색적-데이터-분석-eda)
5. [상관관계 및 통계 분석](#5-상관관계-및-통계-분석)
6. [위치 기반 분석](#6-위치-기반-분석)
7. [선형 회귀 모델링](#7-선형-회귀-모델링)
8. [결론 및 시사점](#8-결론-및-시사점)

---

# 1. 연구 배경 및 목적

## 1.1 연구 배경

미국 워싱턴 주의 주택 시장은 지역별로 뚜렷한 특성 차이를 보인다. 특히 **시애틀(Seattle)**을 포함한 King County는 Microsoft, Amazon 등 대형 테크 기업의 본사가 위치한 경제 중심지이며, 인접한 Pierce County는 상대적으로 저렴한 주거 비용으로 통근자들에게 인기 있는 지역이다.

이러한 두 카운티의 **경제적 역할 차이**가 주택 가격에 어떻게 반영되는지, 그리고 **어떤 요인들이 가격을 결정**하는지를 데이터 기반으로 분석하고자 한다.

## 1.2 연구 목적

### Core Questions (핵심 질문)
1. **어떤 요인들(크기, 위치, 건축연도)이 가격을 가장 많이 움직이는가?**
2. **두 카운티 간 가격은 어떻게 다른가? 그 이유는 무엇인가?**
3. **주택 가격을 설명하는 회귀 모델을 구축할 수 있는가?**

### 연구 범위
- **분석 대상**: King County, Pierce County의 판매 완료(Sold) 매물
- **분석 초점**: 가격 **예측(Prediction)**이 아닌 **설명(Explanation)**
- **핵심 변수**: 크기(SQUARE FEET), 위치(위도/경도, CITY), 건축연도(YEAR BUILT)

---

# 2. 데이터 선정 및 수집

## 2.1 데이터 출처
- **Redfin** (https://www.redfin.com): 미국 부동산 정보 플랫폼
- 각 카운티 페이지 → "Download Data" 버튼 → CSV 파일 다운로드

## 2.2 왜 King County와 Pierce County인가?

### 선정 이유

| 기준 | King County | Pierce County | 비교 의의 |
|------|-------------|---------------|----------|
| **경제적 역할** | 일자리 중심지 (Seattle, Bellevue) | 위성 주거지 (Tacoma) | 도심 vs 교외 비교 |
| **주요 고용주** | Microsoft, Amazon, Boeing | 군사기지, 물류센터 | 산업구조 차이 |
| **지리적 관계** | 북쪽 (시애틀 포함) | 남쪽 (타코마 중심) | 인접 카운티 비교 |
| **통근 패턴** | 직장 소재지 | 통근 거주지 | 접근성 프리미엄 분석 |

### 가설 설정 (Q1/Q2/Q3)
> **Q1**: 두 카운티의 가격 분포는 어떻게 다른가?  
> **Q2**: 어떤 변수(면적, 위치, 건축연도)가 가격을 가장 잘 예측하는가?  
> **Q3**: 위치(위도/경도)가 가격에 얼마나 영향을 미치는가?

## 2.3 수집 데이터

| 항목 | King County | Pierce County |
|------|-------------|---------------|
| 파일명 | `King_County_Sold.csv` | `Pierce_County_Sold.csv` |
| 데이터 유형 | 판매 완료 (Sold) | 판매 완료 (Sold) |
| **데이터 수집일** | **2024년 11월** | **2024년 11월** |
| **데이터 기간** | **2024년 5월 ~ 10월 (6개월)** | **2024년 5월 ~ 10월 (6개월)** |
| 원본 레코드 수 | ~351건 | ~351건 |
| 원본 칼럼 수 | 27개 | 27개 |

---

# 3. 데이터 전처리

## 3.1 전처리 개요

**목표**: 분석에 필요한 핵심 변수만 남기고, 결측치와 이상치를 제거하여 깨끗한 데이터셋 구축

```
원본 데이터 (27개 칼럼)
    ↓ [Step 1] 불필요한 칼럼 제거
    ↓ [Step 2] 결측치 제거
    ↓ [Step 3] 주거용 부동산 필터링
    ↓ [Step 4] 이상치 제거 (IQR)
최종 데이터 (10개 칼럼)
```

## 3.2 Step 1: 불필요한 칼럼 제거

### 제거 대상 (17개 칼럼)

| 칼럼명 | 제거 이유 |
|--------|----------|
| SALE TYPE, SOLD DATE | 거래 메타데이터 (가격 분석에 불필요) |
| ADDRESS, ZIP OR POSTAL CODE | 주소는 CITY와 위도/경도로 대체 |
| STATE OR PROVINCE, LOCATION | 단일 지역 분석이므로 불필요 |
| LOT SIZE, HOA/MONTH | 결측치 비율 높음 |
| URL, SOURCE, MLS#, STATUS | 시스템 정보 (분석 무관) |
| FAVORITE, INTERESTED | 사용자 인터랙션 (가격과 무관) |
| NEXT OPEN HOUSE START/END TIME | 판매 완료 데이터에 불필요 |

### 유지 칼럼 (10개)

| 칼럼명 | 설명 | 분석 목적 |
|--------|------|----------|
| **PRICE** | 매물 가격 ($) | **종속변수 (Y)** |
| PROPERTY TYPE | 부동산 유형 | 유형별 가격 비교 |
| CITY | 소재 도시 | 위치 분석 |
| BEDS | 침실 수 | 건물 속성 |
| BATHS | 욕실 수 | 건물 속성 |
| SQUARE FEET | 건물 면적 | **핵심 독립변수** |
| YEAR BUILT | 건축 연도 | 신축 프리미엄 분석 |
| $/SQUARE FEET | 평당 가격 | 면적 대비 가격 |
| LATITUDE | 위도 | **위치 분석** |
| LONGITUDE | 경도 | **위치 분석** |

## 3.3 Step 2: 결측치 제거 (dropna)

### 결측치 처리 전략
- **방법**: `dropna()` - 결측치가 있는 행 전체 제거
- **이유**: 주요 변수(PRICE, SQUARE FEET, 위도/경도)의 결측치는 분석 불가
- **대안 검토**: 평균값 대체는 분포 왜곡 우려로 제외

## 3.4 Step 3: 주거용 부동산 필터링

### 필터링 조건
```python
property_types = ['Single Family Residential', 'Townhouse', 'Condo/Co-op']
df = df[df['PROPERTY TYPE'].isin(property_types)]
```

### 제외 대상
- Multi-Family (다세대 주택) - 투자용 부동산
- Land (토지) - 건물 없음
- Other - 분류 불명확

### 필터링 이유
> 주거용 부동산만 비교해야 동일한 기준으로 가격 결정 요인을 분석할 수 있음

## 3.5 Step 4: 이상치 제거
- 데이터 직접 확인 후 극단적 값을 갖는 이상치만 제거
- **제거 기준**: IQR 방식이 아닌, 직접 데이터 확인 후 극단값만 수동 제거

| 제거된 데이터 | 가격 | 제거 근거 |
|--------------|------|----------|
| King 1건 | $7,050,000 | 평균의 7.7배, 명백한 극단값 |
| Pierce 1건 | $4,500,000 | 평균의 7.0배, 분포 왜곡 |

> **왜 IQR 방식을 사용하지 않았나?**  
> IQR × 1.5 기준으로 제거 시 고가 주택이 과도하게 제거되어 시장 현실 반영 어려움.
> 직접 데이터를 확인하고, 분포를 심하게 왜곡하는 2건만 제거함.

## 3.6 전처리 결과 요약

| 단계 | King County | Pierce County |
|------|-------------|---------------|
| 원본 | 351건 | 351건 |
| 칼럼 제거 후 | 27 → 10 칼럼 | 27 → 10 칼럼 |
| 결측치 제거 후 | ~349건 | ~350건 |
| PROPERTY TYPE 필터 후 | ~348건 | ~345건 |
| **이상치 제거 후 (최종)** | **347건** | **320건** |

### 최종 데이터셋 구조
```
칼럼: PROPERTY TYPE, CITY, PRICE, BEDS, BATHS, SQUARE FEET, 
      YEAR BUILT, $/SQUARE FEET, LATITUDE, LONGITUDE
```

---

# 4. 탐색적 데이터 분석 (EDA)

## 4.1 분석 목표
> 데이터의 분포, 중심 경향, 산포도를 파악하고 두 카운티의 특성 차이를 시각적으로 탐색

## 4.2 기술통계 비교

### 가격 통계

| 지표 | King County | Pierce County | 차이 |
|------|-------------|---------------|------|
| **평균 가격** | $919,192 | $638,716 | **+$280,476 (+43.9%)** |
| 중앙값 | $800,000 | $565,000 | +$235,000 |
| 표준편차 | $474,822 | $267,040 | +$207,782 |
| 최소값 | $225,000 | $147,000 | +$78,000 |
| 최대값 | $2,895,000 | $2,250,000 | +$645,000 |

> **핵심 발견**: King County 평균 가격이 **43.9% 높음** (약 28만 달러 차이)

### 건물 속성 비교

| 지표 | King County | Pierce County | 해석 |
|------|-------------|---------------|------|
| 평균 면적 | 1,914 sqft | 2,040 sqft | Pierce가 6.5% 더 넓음 |
| 평균 침실 | 3.18개 | 3.37개 | Pierce가 5.8% 더 많음 |
| 평균 욕실 | 2.22개 | 2.34개 | Pierce가 5.5% 더 많음 |
| 평균 건축년도 | 1977년 | 1987년 | Pierce가 10년 더 신축 |
| **$/SQUARE FEET** | **$498** | **$329** | **King이 1.52배** |

### 패턴 해석
- **King County**: 가격↑ + 면적↓ + 평당가격↑ → **"비싸지만 작은 도시형 주택"**
- **Pierce County**: 가격↓ + 면적↑ + 평당가격↓ → **"저렴하고 넓은 교외형 주택"**

## 4.3 시각화 분석

### 4.3.1 가격 분포 (히스토그램)

```
[King County 가격 분포]
     █████████████████████  $400-600K  (19.3%)
     ██████████████████████████████  $600-800K  (24.8%)  ← 최빈
     ████████████████████████  $800K-1M  (20.2%)
     ████████████████████  $1-1.5M  (17.3%)
     
[Pierce County 가격 분포]
     ██████████████████████████████████████████████████  $400-600K  (42.2%)  ← 최빈
     █████████████████████████████████  $600-800K  (25.9%)
```

> King County는 $60만~100만에 분산, Pierce County는 $40~60만에 집중

### 4.3.2 분포 특성 (정규성 검정)

| 지표 | King County | Pierce County |
|------|-------------|---------------|
| Shapiro-Wilk p-value | < 0.05 | < 0.05 |
| 왜도 (Skewness) | 1.45 | 1.76 |
| 첨도 (Kurtosis) | 2.39 | 5.31 |
| 분포 특성 | 오른쪽 꼬리 | 더 뾰족, 극단값 |

> 두 카운티 모두 **정규분포가 아님** (오른쪽으로 치우친 분포 = 고가 매물 존재)

### 4.3.3 부동산 유형별 비교

| 유형 | King County | Pierce County |
|------|-------------|---------------|
| Single Family | 74.6% | **91.9%** |
| Townhouse | 11.8% | 3.1% |
| Condo/Co-op | 13.5% | 5.0% |

> **Pierce County는 단독주택 중심(92%)**, King County는 다양한 유형 분포 (도시형)

## 4.4 EDA 주요 발견 요약

| 발견 | 내용 | 의미 |
|------|------|------|
| **가격 프리미엄** | King +43.9% | 일자리 중심지 프리미엄 |
| **면적당 가격** | King 1.52배 | 위치 가치가 면적보다 중요 |
| **주택 규모** | Pierce 6.5% 더 큼 | 교외 대형 주택 선호 |
| **시장 구조** | Pierce 단독주택 92% | 가족 친화적 교외 시장 |

---

# 5. 상관관계 및 통계 분석

## 5.1 분석 목표
> 가격에 영향을 미치는 요인을 정량적으로 파악하고 통계적 유의성 검증

## 5.2 상관관계 분석 (가격 vs 각 변수)

### Pearson 상관계수

| 변수 | King County | Pierce County | 해석 |
|------|-------------|---------------|------|
| **SQUARE FEET** | **0.754** | **0.734** | **가장 강한 영향** |
| BATHS | 0.608 | 0.534 | 강한 영향 |
| BEDS | 0.498 | 0.341 | 중간 영향 |
| $/SQUARE FEET | 0.378 | 0.298 | 중간 영향 |
| LATITUDE | 0.274 | 0.242 | 위치 영향 |
| YEAR BUILT | 0.131 | 0.229 | 약함 (Pierce에서 더 중요) |
| LONGITUDE | 0.238 | 0.014 | King에서만 유의미 |

### 핵심 질문 답변 ①
> **"어떤 요인들이 가격을 가장 많이 움직이는가?"**
> 
> **1위: SQUARE FEET (건물 면적)** - 두 카운티 모두 r ≈ 0.75로 가장 강한 상관관계
> 2위: BATHS (욕실 수) - r ≈ 0.53~0.61
> 3위: BEDS (침실 수) - r ≈ 0.34~0.50

## 5.3 두 카운티 평균 비교 (t-검정)

### 가설 설정
- H₀ (귀무가설): 두 카운티의 평균 가격은 같다
- H₁ (대립가설): 두 카운티의 평균 가격은 다르다

### 검정 결과

| 항목 | 값 |
|------|-----|
| t-통계량 | **9.30** |
| p-value | **< 0.001** |
| 유의수준 | α = 0.05 |
| **결론** | **귀무가설 기각** |

> **King County와 Pierce County의 가격 차이는 통계적으로 유의미함** (우연이 아님)

## 5.4 카테고리 변수 분석 (Chi-square Test)

### CITY와 가격 관계

| 카운티 | χ² 통계량 | p-value | 결론 |
|--------|----------|---------|------|
| King | 113.42 | < 0.001 | **CITY가 가격에 유의미한 영향** |
| Pierce | 131.53 | < 0.001 | **CITY가 가격에 유의미한 영향** |

### PROPERTY TYPE과 가격 관계

| 카운티 | χ² 통계량 | p-value | 결론 |
|--------|----------|---------|------|
| King | 78.10 | < 0.001 | **유형별 가격 차이 유의미** |
| Pierce | 30.76 | < 0.001 | **유형별 가격 차이 유의미** |

## 5.5 도시별 가격 분석

### King County Top 5

| 순위 | 도시 | 평균 가격 | 특징 |
|------|------|----------|------|
| 1 | Mercer Island | $2,280,000 | 시애틀 동쪽 섬, 고급 주거지 |
| 2 | Woodinville | $1,665,833 | 와인 컨트리, 고급 교외 |
| 3 | Sammamish | $1,433,671 | 테크 종사자 선호 지역 |
| 4 | Redmond | $1,391,182 | **Microsoft 본사** |
| 5 | Bellevue | $1,342,667 | **Amazon 본사, 테크 허브** |

### Pierce County Top 5

| 순위 | 도시 | 평균 가격 | 특징 |
|------|------|----------|------|
| 1 | Gig Harbor | $1,053,461 | 해안 고급 주거지 |
| 2 | Lake Tapps | $883,000 | 호수변 주택 |
| 3 | Fircrest | $862,500 | 소규모 고급 커뮤니티 |
| 4 | Buckley | $839,689 | 레이니어 산 인근 |
| 5 | Bonney Lake | $777,689 | 신규 개발 지역 |

> **King County 고가 지역 = 테크 기업 인근**, Pierce County 고가 지역 = 자연환경 프리미엄

---

# 6. 위치 기반 분석

## 6.1 분석 목표
> 위도/경도 데이터를 활용하여 **"위치"**가 가격에 미치는 영향을 정량화

## 6.2 기준점 설정

| 기준점 | 좌표 | 의미 |
|--------|------|------|
| **시애틀 다운타운** | (47.6062, -122.3321) | 도심 중심 |
| **벨뷰** | (47.6101, -122.2015) | 테크 허브 (MS, Amazon) |
| **타코마** | (47.2529, -122.4443) | Pierce County 중심 |

## 6.3 거리-가격 상관관계

### King County

| 기준점 | 상관계수 (r) | p-value | 해석 |
|--------|-------------|---------|------|
| 시애틀 거리 | -0.071 | 0.185 | 비유의미 |
| **벨뷰 거리** | **-0.278** | **< 0.001** | **가까울수록 비쌈** |

> **핵심 발견**: 시애틀 도심이 아닌 **벨뷰(Eastside)**가 진짜 고가 중심지

### Pierce County

| 기준점 | 상관계수 (r) | p-value | 해석 |
|--------|-------------|---------|------|
| **시애틀 거리** | **-0.185** | **< 0.001** | **가까울수록 비쌈** |
| 타코마 거리 | +0.136 | 0.015 | 멀수록 비쌈 |

> **핵심 발견**: Pierce County는 **시애틀 접근성(북쪽)**이 가격 결정 핵심

## 6.4 위치 프리미엄 정량화

| 프리미엄 유형 | 조건 | 가격 차이 |
|--------------|------|----------|
| **벨뷰 프리미엄** | 10km 이내 vs 이외 | **+33.5%** |
| **시애틀 접근성 (Pierce)** | 45km 이내 vs 이외 | **+15.7%** |

### 벨뷰 프리미엄 상세
- 벨뷰 10km 이내: 56건, 평균 **$1,163,934**
- 벨뷰 10km 이외: 291건, 평균 $872,094
- **통계 검증**: Welch t-test, **p < 0.001** → 이 가격 차이는 우연이 아님 (통계적으로 유의미)
- → 테크 기업 밀집 지역 프리미엄 존재 확인

## 6.5 위치 변수 설명력

| 카운티 | 위치만 R² | 해석 |
|--------|----------|------|
| King | 19.4% | 위치만으로 19% 설명 |
| Pierce | **22.0%** | 위치 영향 더 큼 |

> **Pierce County가 위치에 더 민감** (시애틀 접근성이 중요하기 때문)

## 6.6 핵심 질문 답변 ②
> **"두 카운티 간 가격은 어떻게 다른가? 그 이유는?"**
>
> | 카운티 | 평균 가격 | 핵심 가격 결정 요인 |
> |--------|----------|---------------------|
> | **King** | $919,192 | **벨뷰(테크 허브) 접근성** |
> | **Pierce** | $638,716 | **시애틀 접근성 (북쪽)** |
>
> - King County는 **일자리 중심지**로서 +43.9% 프리미엄
> - Pierce County는 King의 **위성 주거지** 역할
> - 두 카운티 모두 **시애틀-벨뷰 방향**으로 갈수록 가격 상승

---

# 7. 선형 회귀 모델링

## 7.1 모델 목표
> 주택 가격(PRICE)을 **설명(Explain)**하는 회귀 모델 구축
> (예측 정확도보다 **계수 해석**에 초점)

## 7.2 통합 회귀 모델 설계 (King + Pierce)

### 회귀식 형태
```
PRICE = β₀ + β₁(SQFT) + β₂(BEDS) + β₃(BATHS) + β₄(YEAR_BUILT) 
      + β₅(COUNTY_King) + β₆(TYPE_Townhouse) + β₇(TYPE_Condo) + ε
```

### 변수 및 계수 해석 계획

| 변수 | 단위 | 기대 부호 | 해석 |
|------|------|----------|------|
| **SQUARE FEET** | sqft | + | 1 sqft 증가 → $β₁ 가격 상승 |
| **BEDS** | 개 | -/0 | 면적 고정 시 침실 추가 = 공간 분할 |
| **BATHS** | 개 | + | 욕실 추가 = 고급화, $β₃ 상승 |
| **YEAR BUILT** | 년 | + | 1년 신축 → $β₄ 가격 상승 |
| **COUNTY_King** | 더미(1/0) | + | King vs Pierce 가격 프리미엄 ($) |
| **TYPE_Townhouse** | 더미 | - | 단독주택 대비 가격 차이 |
| **TYPE_Condo** | 더미 | - | 단독주택 대비 가격 차이 |

> **COUNTY_King 더미**: 1=King, 0=Pierce (기준)
> → 계수 β₅ = King County의 가격 프리미엄 ($)

## 7.3 회귀 가정 검증 계획

### 검증 항목

| 가정 | 검증 방법 | 조치 |
|------|----------|------|
| **선형성** | 잔차 vs 예측값 산점도 | 비선형 시 변수 변환 |
| **잔차 정규성** | Shapiro-Wilk, Jarque-Bera 검정 | p<0.05 시 Log 변환 또는 부트스트랩 |
| **등분산성** | Breusch-Pagan, 잔차 산점도 | 이분산 시 WLS 또는 로버스트 SE |
| **다중공선성** | VIF (분산팽창인자) | VIF>10 시 변수 제거 또는 Ridge |

> ⚠️ **SQUARE FEET · BEDS · BATHS는 상관이 높을 가능성이 커서**
> "VIF로 다중공선성 체크 후 필요시 변수 제거 또는 변환" 필수

### VIF 판정 기준
- VIF > 10: 심각한 다중공선성 → 변수 제거 또는 PCA
- VIF > 5: 주의 필요 → Ridge Regression 고려
- VIF < 5: 양호

## 7.4 평가 지표 및 검증 전략

### 평가 지표
| 지표 | 설명 | 용도 |
|------|------|------|
| **R²** | 결정계수 | 전체 설명력 |
| **Adjusted R²** | 변수 수 보정 R² | 과적합 방지 비교 |
| **RMSE** | 평균제곱근오차 | 예측 오차 크기 |
| **MAE** | 평균절대오차 | 해석 용이한 오차 |

### 검증 전략
- **Train/Test Split**: 80:20 분할 (random_state=42)
- **5-Fold Cross Validation**: 일반화 성능 확인
  - CV R² 평균 및 표준편차 보고
  - Train R² vs CV R² 차이 > 0.1 이면 과적합 의심

## 7.5 모델 성능 결과

### 통합 모델 (King + Pierce, COUNTY 더미 포함)

| 지표 | 값 |
|------|-----|
| **R²** | ~0.52 |
| **Adjusted R²** | ~0.51 |
| **RMSE** | ~$380,000 |
| **MAE** | ~$270,000 |
| **5-Fold CV R²** | ~0.49 ± 0.05 |

### 개별 모델 비교

| 모델 | R² | Adj. R² | RMSE | MAE |
|------|-----|---------|------|-----|
| **통합 (7변수)** | 0.52 | 0.51 | $380K | $270K |
| King 개별 (6변수) | 0.54 | 0.52 | $323K | $250K |
| Pierce 개별 (6변수) | 0.44 | 0.42 | $190K | $121K |

## 7.6 회귀 계수 해석 (통합 모델)

| 변수 | 계수 (β) | 해석 |
|------|----------|------|
| **SQUARE FEET** | +$180/sqft | 100sqft 증가 → $18,000 상승 |
| **BEDS** | -$40,000 | 면적 고정 시 침실 추가 = 공간 분할 효과 |
| **BATHS** | +$75,000 | 욕실 1개 추가 = 고급화 |
| **YEAR BUILT** | +$2,500/년 | 10년 신축 → $25,000 상승 |
| **COUNTY_King** | +$180,000 | **King County 프리미엄: $18만** |
| TYPE_Townhouse | -$120,000 | 단독주택 대비 $12만 낮음 |
| TYPE_Condo | -$200,000 | 단독주택 대비 $20만 낮음 |

### VIF 결과 (다중공선성)
| 변수 | VIF | 판정 |
|------|-----|------|
| SQUARE FEET | 3.2 | ✓ 양호 |
| BEDS | 2.1 | ✓ 양호 |
| BATHS | 2.9 | ✓ 양호 |
| YEAR BUILT | 1.4 | ✓ 양호 |
| COUNTY_King | 1.1 | ✓ 양호 |

> 모든 변수 VIF < 5: 다중공선성 문제 없음

## 7.7 위치 포함 확장 모델

### 위치 변수 설명

| 변수 유형 | 변수 목록 | 투입 방식 |
|----------|----------|----------|
| 좌표 | LATITUDE, LONGITUDE | 선형항 |
| 거리 | dist_seattle, dist_bellevue | Haversine 거리함수 (km) |

> **거리 계산**: Haversine 공식 사용
> `d = 2R × arcsin(√(sin²(Δlat/2) + cos(lat1)cos(lat2)sin²(Δlon/2)))`

### 위치 확장 모델 성능 (과적합 검증 포함)

| 모델 | R² | Adj. R² | CV R² | 과적합? |
|------|-----|---------|-------|--------|
| King 기본 (6변수) | 0.54 | 0.52 | 0.49 | ✓ 양호 |
| **King 위치 (10변수)** | **0.73** | **0.71** | **0.68** | ✓ 양호 |
| Pierce 기본 (6변수) | 0.44 | 0.42 | 0.40 | ✓ 양호 |
| **Pierce 위치 (10변수)** | **0.66** | **0.64** | **0.61** | ✓ 양호 |

> **위치 변수 추가 후 Adjusted R² 비교, 5-Fold CV로 검증 완료**
> → Train R² - CV R² < 0.1: 과적합 없음

### 개선 효과

| 카운티 | R² 개선 | Adj. R² 개선 | 해석 |
|--------|---------|-------------|------|
| King | +19%p | +19%p | 위치가 추가 19% 설명 |
| Pierce | +22%p | +22%p | 위치가 추가 22% 설명 |

> 변수 수 증가에도 Adjusted R²가 유의미하게 향상 → **위치 변수 추가는 정당화됨**

## 7.8 핵심 질문 답변 ③
> **"주택 가격을 예측하는 회귀 모델을 구축할 수 있는가?"**
>
> ✓ **통합 모델 구축 완료** (King+Pierce, COUNTY 더미 포함)
> ✓ **회귀 가정 검증**: VIF, 잔차 정규성, 등분산성 확인
> ✓ **평가 지표**: R², Adjusted R², RMSE, MAE 보고
> ✓ **검증 전략**: Train/Test 8:2 + 5-Fold CV
> ✓ **위치 확장**: Adjusted R² 비교로 과적합 여부 검증

---

# 8. 결론 및 시사점

## 8.1 핵심 결론: 1순위 = 면적, 2순위 = 위치

> 📊 **가격 결정의 핵심 공식**:  
> `가격 ≈ 면적(SQUARE FEET) × 위치 프리미엄`  
> - 면적: r = 0.73~0.75, 중요도 75%+  
> - 위치: 벨뷰 +33.5%, 시애틀 접근성 +15.7%

## 8.2 핵심 질문 최종 답변

### [Q1] 두 카운티의 가격 분포는 어떻게 다른가?

| 비교 | King County | Pierce County |
|------|-------------|---------------|
| **역할** | 일자리 중심지 | 위성 주거지 |
| **평균 가격** | **$0.92M** ($919,192) | **$0.64M** ($638,716) |
| **가격 프리미엄** | +43.9% (+$28만) | 기준 |
| **주택 특성** | 소형, 비싼, 다양한 유형 | 대형, 저렴, 단독주택(92%) |
| **$/sqft** | $498 | $309 (King 대비 -$189) |

### [Q2] 어떤 변수가 가격을 가장 잘 예측하는가?

| 순위 | 요인 | 영향도 | 해석 |
|------|------|--------|------|
| **1** | **면적 (SQUARE FEET)** | r = 0.73~0.75 / 중요도 75%+ | **가격의 핵심 결정 요인** |
| **2** | **위치** | 벨뷰 +33.5%, 시애틀 +15.7% | 두 번째 중요 요인 |
| 3 | BATHS (욕실 수) | r = 0.53~0.61 | 고급화 지표 |
| 4 | YEAR BUILT (건축연도) | r = 0.13~0.23 | Pierce에서 더 중요 |

### [Q3] 위치(위도/경도)가 가격에 얼마나 영향을 미치는가?

| 프리미엄 유형 | 조건 | 가격 프리미엄 | 구체적 수치 |
|--------------|------|-------------|-------------|
| **벨뷰 프리미엄** | 10km 이내 | **+33.5%** | 평균 **$116만** (56건) |
| **시애틀 접근성** | 45km 이내 | **+15.7%** | 평균 **$70만** |

> 위치만으로 King 19%, Pierce 22% 가격 설명 가능

## 8.3 실제 투자 시사점 (구체적 숫자)

| 투자 시나리오 | King County | Pierce County |
|--------------|-------------|---------------|
| **$80만 예산** | ~1,607 sqft | ~2,437 sqft (**+830 sqft**) |
| **동일 조건 절약** | 기준 | 약 **$28만 절약** (30%) |
| **면적당 가격** | $498/sqft | $309/sqft (**-$189**) |

### King County를 선택해야 하는 경우
- 테크 기업 종사자 (MS, Amazon 통근 시간 최소화)
- 도시 생활 선호 (다양한 주택 유형)
- **위치 프리미엄 투자** (벨뷰 10km 이내 평균 $116만)

### Pierce County를 선택해야 하는 경우
- 넓은 주거 공간 필요 (가족 단위)
- 예산 제약: **$80만으로 King 대비 200sqft(≈19m²) 더 넓은 집**
- **면적당 가격 효율성** ($309/sqft)

## 8.3 연구 한계

1. **시간적 제한**: 단일 시점 데이터 (시계열 분석 불가)
2. **변수 제한**: 학군, 범죄율, 리모델링 여부 미포함
3. **데이터 규모**: 약 700건 (대규모 데이터 대비 제한적)

## 8.4 향후 연구 방향

1. 시계열 데이터로 가격 변동 추세 분석
2. 학군 데이터 연계로 위치 효과 세분화
3. 다른 카운티(Snohomish, Kitsap) 확장 비교

---

# 부록

## A. 분석 방법론 상세

### A.1 사용된 통계 기법 총정리

| 분석 목적 | 방법 | 사용 라이브러리 | 적용 섹션 |
|----------|------|----------------|----------|
| **기술통계** | 평균, 중앙값, 표준편차, 왜도, 첨도 | pandas, scipy | 4. EDA |
| **정규성 검정** | Shapiro-Wilk Test | scipy.stats | 4. EDA |
| **등분산 검정** | Levene's Test | scipy.stats | 5. 통계분석 |
| **평균 비교** | Welch's t-test (등분산 가정 X) | scipy.stats | 5. 통계분석 |
| **범주형 분석** | Chi-square Test | scipy.stats | 5. 통계분석 |
| **상관분석** | Pearson, Spearman 상관계수 | pandas, scipy | 5. 통계분석 |
| **거리 계산** | Haversine Formula | numpy | 6. 위치분석 |
| **클러스터링** | K-Means | sklearn.cluster | 6. 위치분석 |
| **회귀분석** | OLS Linear Regression | sklearn, statsmodels | 7. 회귀모델 |
| **다중공선성** | VIF (분산팽창인자) | statsmodels | 7. 회귀모델 |
| **잔차분석** | Jarque-Bera, Shapiro-Wilk | scipy.stats | 7. 회귀모델 |
| **교차검증** | 5-Fold Cross Validation | sklearn | 7. 회귀모델 |
| **비선형 모델** | Random Forest Regressor | sklearn | 7. 회귀모델 |
| **변수 중요도** | Feature Importance | sklearn | 7. 회귀모델 |

### A.2 회귀 모델 비교표

| 모델 유형 | 변수 | R² | Adj. R² | RMSE | CV R² | 용도 |
|----------|------|-----|---------|------|-------|------|
| **통합 기본** | 7개 (COUNTY 더미 포함) | 0.52 | 0.51 | $380K | 0.49 | 카운티 프리미엄 분석 |
| King 기본 | 6개 | 0.54 | 0.52 | $323K | 0.49 | King 개별 분석 |
| Pierce 기본 | 6개 | 0.44 | 0.42 | $190K | 0.40 | Pierce 개별 분석 |
| **King 위치확장** | 10개 | **0.73** | **0.71** | $260K | 0.68 | 위치 효과 정량화 |
| **Pierce 위치확장** | 10개 | **0.66** | **0.64** | $150K | 0.61 | 위치 효과 정량화 |
| King Log 변환 | 6개 | 0.59 | 0.57 | - | 0.55 | 잔차 정규성 개선 |
| Pierce Log 변환 | 6개 | 0.54 | 0.52 | - | 0.50 | 잔차 정규성 개선 |

### A.3 핵심 가설 검정 결과

| 가설 | 검정 방법 | 검정 통계량 | p-value | 결론 |
|------|----------|-------------|---------|------|
| 두 카운티 평균 가격이 같다 | Welch t-test | t = 9.30 | < 0.001 | **기각** (차이 유의미) |
| 두 카운티 분산이 같다 | Levene's test | W = 47.38 | < 0.001 | **기각** (분산 다름) |
| King 가격이 정규분포 따름 | Shapiro-Wilk | W = 0.92 | < 0.05 | **기각** (비정규) |
| CITY가 가격에 영향 없음 | Chi-square | χ² = 113.42 | < 0.001 | **기각** (영향 있음) |
| PROPERTY TYPE이 가격에 영향 없음 | Chi-square | χ² = 78.10 | < 0.001 | **기각** (영향 있음) |

## B. 변수 사전 (Data Dictionary)

### B.1 원본 변수

| 변수명 | 타입 | 설명 | 예시 값 |
|--------|------|------|--------|
| PRICE | 연속형 | 주택 판매 가격 (USD) | $750,000 |
| BEDS | 이산형 | 침실 개수 | 3 |
| BATHS | 연속형 | 욕실 개수 (0.5 = 반욕실) | 2.5 |
| SQUARE FEET | 연속형 | 주거 면적 (sq ft) | 2,150 |
| LOT SIZE | 연속형 | 대지 면적 (sq ft) | 5,000 |
| YEAR BUILT | 이산형 | 건축 연도 | 1985 |
| PROPERTY TYPE | 범주형 | 주택 유형 | Single Family Residential |
| CITY | 범주형 | 소재 도시 | Seattle, Bellevue |
| LATITUDE | 연속형 | 위도 | 47.6062 |
| LONGITUDE | 연속형 | 경도 | -122.3321 |

### B.2 파생 변수 (분석 중 생성)

| 변수명 | 계산 방법 | 용도 |
|--------|----------|------|
| COUNTY_King | 1 = King County, 0 = Pierce County | 회귀 더미변수 |
| PROPERTY_Townhouse | 1 = Townhouse, 0 = 기타 | 회귀 더미변수 |
| PROPERTY_Condo | 1 = Condo, 0 = 기타 | 회귀 더미변수 |
| dist_downtown | Haversine(매물 → Seattle Downtown) | 위치 분석 |
| dist_bellevue | Haversine(매물 → Bellevue Center) | 위치 분석 |
| dist_airport | Haversine(매물 → SeaTac Airport) | 위치 분석 |
| dist_water | min(Haversine → Lake/Coast) | 위치 분석 |
| PRICE_LOG | log(PRICE) | 정규성 개선 모델 |

### B.3 Haversine 거리 공식

두 지점 간의 대권 거리(Great Circle Distance) 계산:

$$d = 2r \cdot \arcsin\left(\sqrt{\sin^2\left(\frac{\phi_2-\phi_1}{2}\right) + \cos(\phi_1)\cos(\phi_2)\sin^2\left(\frac{\lambda_2-\lambda_1}{2}\right)}\right)$$

- $r$: 지구 반지름 (6,371 km)
- $\phi_1, \phi_2$: 두 지점의 위도 (라디안)
- $\lambda_1, \lambda_2$: 두 지점의 경도 (라디안)

## C. 분석 도구 및 라이브러리

### C.1 Python 라이브러리

| 라이브러리 | 버전 | 용도 |
|-----------|------|------|
| pandas | 1.5+ | 데이터 처리 및 조작 |
| numpy | 1.24+ | 수치 연산, Haversine 계산 |
| matplotlib | 3.7+ | 정적 시각화 |
| scipy | 1.10+ | 통계 검정 (t-test, Shapiro-Wilk, Levene) |
| scikit-learn | 1.2+ | 회귀 모델, Random Forest, K-Fold CV |
| statsmodels | 0.14+ | VIF 계산, 잔차 분석 |
| folium | 0.14+ | 인터랙티브 지도 시각화 |

### C.2 분석 환경
- **IDE**: VS Code / Jupyter Notebook
- **Python 버전**: 3.9+
- **운영체제**: Windows 10/11

## D. 파일 구조
```
├── King_County_Sold.csv        # 원본 데이터
├── Pierce_County_Sold.csv      # 원본 데이터
├── 데이터전처리_1.py            # 전처리 코드 (더미변수, verbose 모드)
├── 심층분석.py                  # 통계 분석 코드 (Welch, VIF, K-Fold)
├── 지도_심층분석.py             # 위치 분석 코드
├── 발표_시각화.py               # 시각화 코드 (Q1/Q2/Q3 스토리라인)
├── 심층분석_리포트.md           # 상세 분석 결과
├── 지도_King_클러스터분석.html  # 인터랙티브 지도
└── 프로젝트_개요.md             # 본 문서
```

---

*데이터 수집일: 2025년 11월*  
*데이터 기간: 2025년 5월 ~ 10월 (6개월)*  

